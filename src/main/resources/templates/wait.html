<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${title}"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="bootstrap.css">
</head>
<body style="background-size: cover;" class="d-flex flex-column min-vh-100">
    <form class="p-4 p-md-5 border rounded-3 bg-light" action="/test2" method="get">
        <div class="text">
            <p>Ваш отчет очень важен для нас. Пожалуйста, дождитесь сборки отчета, это займет несколько минут</p>
        </div>
    </form>
</body>
<footer class="mt-auto">
    <div class="d-flex flex-wrap justify-content-between align-items-center py-3 my-1 border-top ">
        <div class="col-md-4 d-flex align-items-center ">
            <a href="/" class="mb-3 me-2 mb-md-0 text-body-light text-decoration-none lh-1">
                <svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
            </a>
            <span class="mb-3 mb-md-0 text-body-light">© Skillbox, 2023</span>
        </div>
    </div>
</footer>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function checkStatusAndRedirect() {
        $.ajax({
            url: '/checkStatus',
            method: 'GET',
            success: function(response) {
                if (response === 'completed') {
                    window.location.href = '/newPage'; // Переход на другую страницу
                } else {
                    setTimeout(checkStatusAndRedirect, 1000);
                }
            },
            error: function(xhr, status, error) {
                // Обработка ошибок
            }
        });
    }

    checkStatusAndRedirect(); // Запуск проверки статуса при загрузке страницы
</script>
</html>